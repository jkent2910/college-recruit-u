<div>
  <%= form_tag student_status_college_path do %>
    <%= hidden_field_tag :student_profile_id, @student_profile.to_param %>
    <div class="field">
      <%= label_tag :college_student_status %><br>
      <%= select_tag :college_student_status, options_for_select([''] + CollegeStudentStatus::VALID_STATUSES, @college_status.try(:status_name)) %>
    </div>
    <div class="actions">
      <%= submit_tag "Add College", id: :college_student_status_submit, disabled: true %>
    </div>
  <% end %>
</div>

<script>
 $(function() {
     var statusSelect = $("select#college_student_status");
     var originalStatus = statusSelect.val();

     if (originalStatus != '') {
         $("input#college_student_status_submit").val("Update College");
     }

     var updateSubmitButton = function() {
         var currentStatus = statusSelect.val();
         var submitButton = $("input#college_student_status_submit");
         submitButton.prop('disabled', currentStatus == originalStatus);
         if (currentStatus == '') {
             submitButton.val("Remove College");
         }
     }

     statusSelect.change(function(event) {
         updateSubmitButton();
     });
 });
</script>
